<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>

    <link type="text/css" rel="stylesheet" href="assets/css/style.css">
    <title>FriendFinder Survey</title>
</head>
<nav class="navbar fixed-top navbar-light bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">Friend Finder
        </a>
        <a class="api-link" href="/api/friends">API
        </a>
    </div>
</nav>

<body>
        <div class="container">
                <div id="header">
                    <h1>Survey Questions</h1>
                </div>
        
                <form>
                  <div class="row">
                    <div class="twelve columns">
                      <label for="name">Your name?</label>
                      <input class="u-full-width" type="text" id="name">

   
                      <label for="image">Profile Image.</label>
                      <input class="u-full-width" type="text" id="image">
                <!-- <input id="name" type="text" class="validate" required>
                <label class='active' for="name">Name (required)</label> 
               <input id="photo" type="text" class="validate" required>
                <label class='active' for="name">Link to Photo Image (required)</label>  -->

                <h4><strong>Question 1</strong></h4>
                <label for="q1">I am always busy - always on the go.</label>
                <select data-placeholder="" class="browser-default" id="q1">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 2</strong></h4>
                <label for="q2">I would rather eat out at a restaurant than at home.</label>
                <select data-placeholder="" class="browser-default" id="q2">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 3</strong></h4>
                <label for="q3">I make friends easily</label>
                <select data-placeholder="" class="browser-default" id="q3">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 4</strong></h4>
                <label for="q4">I believe that people generally have good intentions</label>
                <select data-placeholder="" class="browser-default" id="q4">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 5</strong></h4>
                <label for="q5">I go out of my way to seek adventure</label>
                <select data-placeholder="" class="browser-default" id="q5">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 6</strong></h4>
                <label for="q6">I can stay calm under pressure.</label>

                <select data-placeholder="" class="browser-default" id="q6">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 7</strong></h4>
                <label for="q7">I often make decisions on a whim.</label>
                <select data-placeholder="" class="browser-default" id="q7">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 8</strong></h4>
                <label for="q8">I love to help others.</label>
                <select data-placeholder="" class="browser-default" id="q8">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 9</strong></h4>
                <label for="q9">I always know exactly what I want.</label>
                <select data-placeholder="" class="browser-default" id="q9">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4><strong>Question 10</strong></h4>
                <label for="q10">I frequently and easily express my feelings and emotions.</label>
                <select data-placeholder="" class="browser-default" id="q10">

                    <option value="">Choose an option</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                

                <div class="twelve columns">
                        <br>
                        <input class="button-primary" type="submit" id="submit">
                        </div>
          
                  </form>
                    </div>
          
              </div>
          
          <!-- Modal -->
            <div id="resultsModal" class="modal fade" role="dialog">
              <div class="modal-dialog">
          
                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2>Best Match</h2>
                  </div>
                  <div class="modal-body">
                    <h3 id="matchName"></h3>
                    <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </div>
          
              </div>
            </div>
          
          <!-- border divs-->
          <div id="top">
          </div>
          <div id="bottom">
          </div>
          <div id="left">
          </div>
          <div id="right">
          </div>
          
          </body>
          
            <script type="text/javascript">
            // Chosen CSS
              var config = {
                ".chosen-select": {},
                ".chosen-select-deselect": { allow_single_deselect: true },
                ".chosen-select-no-single": { disable_search_threshold: 10 },
                ".chosen-select-no-results": { no_results_text: "Oops, nothing found!" },
                ".chosen-select-width": { width: "95%" }
              };
              for (var selector in config) {
                $(selector).chosen(config[selector]);
              }
              // Capture the form inputs
              $("#submit").on("click", function() {
                // Form validation
                function validateForm() {
                  var isValid = true;
                  $(".form-control").each(function() {
                    if ($(this).val() === "") {
                      isValid = false;
                    }
                  });
                  $(".chosen-select").each(function() {
                    if ($(this).val() === "") {
                      isValid = false;
                    }
                  });
                  return isValid;
                }
                // If all required fields are filled
                if (validateForm()) {
                  // Create an object for the user"s data
                  var newFriends = {
                    name: $("#name").val(),
                    photo: $("#photo").val(),
                    scores: [
                      $("#q1").val(),
                      $("#q2").val(),
                      $("#q3").val(),
                      $("#q4").val(),
                      $("#q5").val(),
                      $("#q6").val(),
                      $("#q7").val(),
                      $("#q8").val(),
                      $("#q9").val(),
                      $("#q10").val()
                    ]
                  };
                  // Grab the URL of the website
                  var currentURL = window.location.origin;
                  // AJAX post the data to the friends API.
                  $.post(currentURL + "/api/friends", newFriends, function(data) {
                    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                    $("#matchName").text(data.name);
                    $("#matchImg").attr("src", data.photo);
                    // Show the modal with the best match
                    $("#resultsModal").modal("toggle");
                  });
                }
                else {
                  alert("Please fill out all fields before submitting!");
                }
                return false;
              });
            </script>
          
          </html>